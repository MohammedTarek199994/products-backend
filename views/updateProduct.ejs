<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="../css/updateProduct.css" />
    <style></style>
  </head>
  <body>
    <nav>
      <a href="#"><h1>E-Commerce</h1></a>
      <ul>
        <a href="/products"> <li>Products</li></a>
        <a href="/addProduct"> <li>Add Product</li></a>
      </ul>
    </nav>
    <!-- ###########################################  -->
    <div class="form-container">
      <p class="title">Update Product</p>
      <form
        method="post"
        action="/updateProduct/<%=product._id%>?_method=PUT"
        enctype="multipart/form-data"
        class="form">
        <div class="input-group">
          <label for="productname">Product Name</label>
          <input
            type="text"
            name="name"
            id="productname"
            value="<%=product.name%>"
            placeholder="Product Name" />
        </div>
        <div class="input-group">
          <label for="productdescription">Product Description</label>
          <input
            type="text"
            name="description"
            id="productdescription"
            value="<%=product.description%>"
            placeholder="Product Description" />
        </div>
        <div class="input-group">
          <label for="productprice">Product Price</label>
          <input
            type="number"
            name="price"
            step="0.001"
            id="productprice"
            value="<%=product.price%>"
            placeholder="Product price" />
        </div>
        <div class="input-image">
          <div class="input-div">
            <input
              class="input"
              type="file"
              class="form-control"
              id="imageInput"
              name="image"
              value="<%=imagePath%>"
              accept="image/*" />
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="1em"
              height="1em"
              stroke-linejoin="round"
              stroke-linecap="round"
              viewBox="0 0 24 24"
              stroke-width="2"
              fill="none"
              stroke="currentColor"
              class="icon">
              <polyline points="16 16 12 12 8 16"></polyline>
              <line y2="21" x2="12" y1="12" x1="12"></line>
              <path
                d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path>
              <polyline points="16 16 12 12 8 16"></polyline>
            </svg>
          </div>
        </div>
        <div class="input-image" id="imagePreview">
          <img
            id="previewImage"
            src="<%=product.image%>"
            alt="image-prev"
            style="width: 100%" />
        </div>

        <button type="submit" class="submit">Submit</button>
      </form>
    </div>
    <script>
      const imageInput = document.getElementById("imageInput");
      const imagePreview = document.getElementById("imagePreview");
      const previewImage = document.getElementById("previewImage");

      imageInput.addEventListener("change", (event) => {
        const file = event.target.files[0];
        console.log(file);
        if (file) {
          // Create a FileReader to read the selected image
          const reader = new FileReader();

          reader.onload = (e) => {
            previewImage.src = e.target.result;
            imagePreview.style.display = "flex";
            imagePreview.style.justifyContent = "center";
          };
          //   inputDiv.style.backgroundColor = "none";
          reader.readAsDataURL(file);
        } else {
          // Clear the preview if no file is selected
          previewImage.src = "";
          imagePreview.style.display = "none";
        }
      });
    </script>
  </body>
</html>
